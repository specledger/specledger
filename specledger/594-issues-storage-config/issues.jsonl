{"id":"SL-775ab4","title":"Issues Storage Configuration","description":"Refactor issues storage system to: 1) Rename lock files from .issues.jsonl.lock to issues.jsonl.lock, 2) Use artifact_path from specledger.yaml for issue storage, 3) Add lock file pattern to .gitignore","status":"closed","priority":1,"issue_type":"epic","spec_context":"594-issues-storage-config","created_at":"2026-02-20T09:14:06.52593+07:00","updated_at":"2026-02-20T09:45:36.451475+07:00","closed_at":"2026-02-20T09:45:36.451475+07:00","labels":["spec:594-issues-storage-config","component:cli"]}
{"id":"SL-734037","title":"Rename lock file to issues.jsonl.lock","description":"Problem: Lock files use hidden file naming (.issues.jsonl.lock) which makes them harder to debug and prevents simple gitignore patterns.\n\nChange the lock file naming from .issues.jsonl.lock to issues.jsonl.lock (remove leading dot) in the issue store implementation.","status":"closed","priority":1,"issue_type":"task","spec_context":"594-issues-storage-config","created_at":"2026-02-20T09:16:25.082131+07:00","updated_at":"2026-02-20T09:35:55.747442+07:00","closed_at":"2026-02-20T09:35:55.747441+07:00","blocks":["SL-648ba0","SL-3a3b40"],"labels":["spec:594-issues-storage-config","story:US1","component:issues","fr:FR-001"],"design":"File: pkg/issues/store.go\n\nIn NewStore() function (lines 52 and 60):\n- Change lock path from '.issues.jsonl.lock' to 'issues.jsonl.lock'\n\nTwo locations:\n1. Cross-spec mode (line 52): flock.New(filepath.Join(basePath, 'issues.jsonl.lock'))\n2. Spec-specific mode (line 60): filepath.Join(basePath, opts.SpecContext, 'issues.jsonl.lock')\n\nNo changes to lock acquisition logic - only path naming.","acceptance_criteria":"1. Creating an issue generates issues.jsonl.lock (not .issues.jsonl.lock)\n2. Cross-spec operations use issues.jsonl.lock at base artifact path  \n3. Existing functionality unchanged"}
{"id":"SL-096cb1","title":"Load artifact_path from specledger.yaml in issue commands","description":"Problem: Issue commands ignore the artifact_path configuration in specledger.yaml, always using hardcoded 'specledger/' path.\n\nLoad artifact_path from specledger.yaml using existing metadata.LoadProjectMetadata() and pass it to the issue store.","status":"closed","priority":1,"issue_type":"task","spec_context":"594-issues-storage-config","created_at":"2026-02-20T09:16:51.017693+07:00","updated_at":"2026-02-20T09:35:56.860256+07:00","closed_at":"2026-02-20T09:35:56.860255+07:00","blocks":["SL-3a3b40"],"labels":["spec:594-issues-storage-config","story:US2","component:cli","fr:FR-002","fr:FR-006","fr:FR-008"],"design":"File: pkg/cli/commands/issue.go\n\nCreate helper function getArtifactPath() that:\n1. Calls metadata.LoadProjectMetadata('.')\n2. On success: returns meta.GetArtifactPath()\n3. On error: returns 'specledger/' (default)\n\nUpdate all issue commands to use this helper:\n- runIssueCreate: pass BasePath to NewStore()\n- runIssueList: pass BasePath to NewStore() and ListAllSpecs()\n- runIssueShow: pass BasePath to NewStore()\n- runIssueUpdate: pass BasePath to NewStore()\n- runIssueClose: pass BasePath to NewStore()\n- runIssueLink/runIssueUnlink: pass BasePath to NewStore()\n- runIssueRepair: pass BasePath to NewStore()\n\nImport: github.com/specledger/specledger/pkg/cli/metadata","acceptance_criteria":"1. Issues stored in custom artifact_path when configured\n2. Issues stored in specledger/ when no config or config error\n3. All issue CLI commands respect artifact_path\n4. sl issue list --all searches in configured artifact_path"}
{"id":"SL-648ba0","title":"Add issues.jsonl.lock to project .gitignore","description":"Problem: Lock files appear in git status as untracked files, cluttering version control.\n\nAdd issues.jsonl.lock pattern to .gitignore so lock files are automatically ignored.","status":"closed","priority":2,"issue_type":"task","spec_context":"594-issues-storage-config","created_at":"2026-02-20T09:17:32.462213+07:00","updated_at":"2026-02-20T09:37:07.918468+07:00","closed_at":"2026-02-20T09:37:07.918468+07:00","blocked_by":["SL-734037"],"blocks":["SL-3a3b40"],"labels":["spec:594-issues-storage-config","story:US3","component:config","fr:FR-004"],"design":"File: .gitignore (project root)\n\nAdd line: issues.jsonl.lock\n\nPlacement: Under '# SpecLedger specific' section (around line 39-46) with other SpecLedger patterns.\n\nAlso check if embedded templates need updating:\n- pkg/embedded/templates/specledger/ - review if .gitignore template exists\n- If not, document in quickstart.md that users should add the pattern","acceptance_criteria":"1. .gitignore contains issues.jsonl.lock pattern\n2. git status does not show lock files as untracked\n3. Lock files are correctly ignored by git"}
{"id":"SL-3a3b40","title":"Run quickstart.md validation tests","description":"Validation: Run through quickstart.md test scenarios to verify all acceptance criteria are met.\n\nExecute all 6 test scenarios from specledger/594-issues-storage-config/quickstart.md to verify the feature works correctly.","status":"closed","priority":2,"issue_type":"task","spec_context":"594-issues-storage-config","created_at":"2026-02-20T09:17:54.379919+07:00","updated_at":"2026-02-20T09:45:16.293077+07:00","closed_at":"2026-02-20T09:45:16.293077+07:00","blocked_by":["SL-734037","SL-096cb1","SL-648ba0"],"labels":["spec:594-issues-storage-config","phase:polish","component:test"],"design":"Follow test scenarios in specledger/594-issues-storage-config/quickstart.md:\n\n1. Test 1: Lock file naming - verify issues.jsonl.lock created\n2. Test 2: Default artifact path - verify specledger/ default works\n3. Test 3: Custom artifact path - verify custom path works\n4. Test 4: Gitignore pattern - verify lock files ignored\n5. Test 5: List all with custom path - verify --all searches correctly\n6. Test 6: Missing specledger.yaml - verify fallback to default\n\nRun: go build -o sl ./cmd/sl before testing","acceptance_criteria":"All 6 test scenarios in quickstart.md pass:\n1. Lock file named issues.jsonl.lock\n2. Default path behavior unchanged\n3. Custom artifact_path respected\n4. Lock files ignored by git\n5. List --all works with custom path\n6. Graceful fallback on missing config"}
