{"id":"SL-826d4e","title":"Doctor Version and Template Update","description":"Enhance sl doctor to check CLI version against GitHub Releases API, display update instructions when outdated, and proactively offer to update project templates when version mismatch is detected. Template version tracking stored in specledger.yaml metadata.","status":"closed","priority":1,"issue_type":"epic","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:30:35.876179+07:00","updated_at":"2026-02-20T15:25:21.144572+07:00","closed_at":"2026-02-20T15:25:21.144572+07:00","labels":["spec:596-doctor-version-update","component:cli"]}
{"id":"SL-be5e0e","title":"Foundational: Schema and Types","description":"Add TemplateVersion field to ProjectMetadata schema and create core type definitions needed by all user stories. This is a blocking prerequisite for US1, US2, and US3.","status":"closed","priority":0,"issue_type":"feature","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:30:59.354446+07:00","updated_at":"2026-02-20T15:25:07.999349+07:00","closed_at":"2026-02-20T15:25:07.999349+07:00","labels":["spec:596-doctor-version-update","phase:foundational","component:metadata"]}
{"id":"SL-011a55","title":"US1: CLI Version Check and Update Prompt","description":"Users can check their CLI version status and see update instructions when outdated. This is the foundational capability for keeping users informed about available updates.","status":"closed","priority":1,"issue_type":"feature","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:31:00.452795+07:00","updated_at":"2026-02-20T15:25:09.029192+07:00","closed_at":"2026-02-20T15:25:09.029192+07:00","labels":["spec:596-doctor-version-update","phase:us1","story:US1","component:cli"]}
{"id":"SL-a00083","title":"US2: Project Template Update","description":"Users are proactively offered to update project templates when version mismatch is detected. Keeps projects current with CLI improvements.","status":"closed","priority":1,"issue_type":"feature","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:31:01.272109+07:00","updated_at":"2026-02-20T15:25:10.186836+07:00","closed_at":"2026-02-20T15:25:10.186836+07:00","labels":["spec:596-doctor-version-update","phase:us2","story:US2","component:cli"]}
{"id":"SL-fb291a","title":"US3: CI/CD JSON Output Support","description":"Machine-readable JSON output with version and template status for automation pipelines. Extends existing --json flag with new fields.","status":"closed","priority":2,"issue_type":"feature","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:31:03.243866+07:00","updated_at":"2026-02-20T15:25:11.030352+07:00","closed_at":"2026-02-20T15:25:11.030352+07:00","labels":["spec:596-doctor-version-update","phase:us3","story:US3","component:cli"]}
{"id":"SL-0d2400","title":"Polish: Documentation and Validation","description":"Final polish including documentation updates, CLAUDE.md updates, and validation tests from quickstart.md.","status":"closed","priority":3,"issue_type":"feature","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:31:04.472713+07:00","updated_at":"2026-02-20T15:25:11.813151+07:00","closed_at":"2026-02-20T15:25:11.813151+07:00","labels":["spec:596-doctor-version-update","phase:polish","component:docs"]}
{"id":"SL-e206f1","title":"Add TemplateVersion field to ProjectMetadata","description":"WHY: Need to track which CLI version created/updated the project templates for comparison.\n\nWHAT: Add optional TemplateVersion string field to ProjectMetadata struct in schema.go.\n\nDESIGN: File: pkg/cli/metadata/schema.go\nAdd field: TemplateVersion string `yaml:\"template_version,omitempty\"`\nUpdate NewProjectMetadata() to initialize field with current CLI version.\n\nACCEPTANCE:\n- TemplateVersion field exists in ProjectMetadata struct\n- Field is optional (omitempty)\n- YAML marshalling includes field when set\n- Backward compatible (missing field treated as empty)\n\nDEFINITION OF DONE:\n[ ] TemplateVersion field added to struct\n[ ] Field has correct yaml tag\n[ ] NewProjectMetadata sets initial value\n[ ] Existing tests pass","status":"closed","priority":0,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:32:10.214509+07:00","updated_at":"2026-02-20T14:58:42.209052+07:00","closed_at":"2026-02-20T14:58:42.209051+07:00","blocks":["SL-445a25","SL-8c624a"],"labels":["spec:596-doctor-version-update","story:US1","story:US2","component:metadata"]}
{"id":"SL-9524be","title":"Create pkg/version package with VersionInfo type","description":"WHY: Need a dedicated package for version checking logic that can be reused across commands.\n\nWHAT: Create new pkg/version/ package with VersionInfo struct and basic version comparison utilities.\n\nDESIGN: Files: pkg/version/version.go\nDefine VersionInfo struct with fields: CurrentVersion, LatestVersion, LatestURL, UpdateAvailable, CheckedAt\nAdd helper function CompareVersions(current, latest string) bool\n\nACCEPTANCE:\n- pkg/version/ package exists\n- VersionInfo struct defined with all fields\n- CompareVersions function works correctly\n- Package compiles without errors\n\nDEFINITION OF DONE:\n[ ] pkg/version/ directory created\n[ ] version.go with VersionInfo struct\n[ ] CompareVersions helper function\n[ ] Package compiles","status":"closed","priority":0,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:32:45.808823+07:00","updated_at":"2026-02-20T15:03:00.727971+07:00","closed_at":"2026-02-20T15:03:00.727971+07:00","blocks":["SL-faa3a6","SL-445a25"],"labels":["spec:596-doctor-version-update","story:US1","component:version"]}
{"id":"SL-faa3a6","title":"Implement GitHub Releases API client","description":"WHY: Need to query GitHub for the latest CLI version to compare against installed version.\n\nWHAT: Create HTTP client to query GitHub Releases API with timeout and error handling.\n\nDESIGN: File: pkg/version/checker.go\n- func CheckLatestVersion() (*VersionInfo, error)\n- Use net/http with 5-second timeout\n- Endpoint: https://api.github.com/repos/specledger/specledger/releases/latest\n- Parse tag_name as semver (strip v prefix)\n- Handle errors gracefully (rate limit, timeout, parse errors)\n\nACCEPTANCE:\n- API client queries GitHub Releases successfully\n- 5-second timeout enforced\n- Rate limit errors handled gracefully\n- Network errors do not crash the command\n\nDEFINITION OF DONE:\n[ ] checker.go created in pkg/version/\n[ ] CheckLatestVersion function implemented\n[ ] Timeout handling in place\n[ ] Error handling for common failure modes","status":"closed","priority":1,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:32:46.913569+07:00","updated_at":"2026-02-20T15:04:56.778785+07:00","closed_at":"2026-02-20T15:04:56.778785+07:00","blocked_by":["SL-9524be"],"labels":["spec:596-doctor-version-update","story:US1","fr:FR-002","fr:FR-005","component:version"]}
{"id":"SL-445a25","title":"Add CLI version section to doctor output","description":"WHY: Users need to see their CLI version status when running sl doctor.\n\nWHAT: Extend doctor command to display CLI version section with current version, latest version, and update status.\n\nDESIGN: File: pkg/cli/commands/doctor.go\n- Add CLI version section after Core Tools\n- Call version.CheckLatestVersion() \n- Display current version\n- Show update available indicator\n- Handle offline/network errors gracefully\n\nACCEPTANCE:\n- sl doctor shows CLI version section\n- Current version displayed\n- Latest version displayed (or skipped message)\n- Update available message shown when applicable\n\nDEFINITION OF DONE:\n[ ] CLI version section added to outputDoctorHuman\n[ ] Version check integrated\n[ ] Error states handled gracefully\n[ ] Manual testing confirms output format","status":"closed","priority":1,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:32:48.582391+07:00","updated_at":"2026-02-20T15:10:19.095331+07:00","closed_at":"2026-02-20T15:10:19.09533+07:00","blocked_by":["SL-e206f1","SL-9524be"],"blocks":["SL-5e7876"],"labels":["spec:596-doctor-version-update","story:US1","fr:FR-001","fr:FR-003","fr:FR-004","component:cli"]}
{"id":"SL-a9a5e9","title":"Add update instructions logic","description":"WHY: Users need clear instructions on how to update their CLI when a new version is available.\n\nWHAT: Detect installation method and provide appropriate update instructions.\n\nDESIGN: File: pkg/version/instructions.go\n- func GetUpdateInstructions() string\n- Detect: Homebrew prefix, GOPATH/bin, or default\n- Return method-specific instructions:\n  - Homebrew: brew upgrade specledger\n  - Go install: go install .../cmd/sl@latest\n  - Default: GitHub releases URL\n\nACCEPTANCE:\n- Update instructions displayed when update available\n- Instructions vary based on installation method\n- Fallback to GitHub releases URL\n\nDEFINITION OF DONE:\n[ ] instructions.go created\n[ ] GetUpdateInstructions function\n[ ] Installation method detection\n[ ] Tested with different installation scenarios","status":"closed","priority":1,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:32:49.475108+07:00","updated_at":"2026-02-20T15:06:18.47846+07:00","closed_at":"2026-02-20T15:06:18.478459+07:00","labels":["spec:596-doctor-version-update","story:US1","fr:FR-003","component:version"]}
{"id":"SL-fd58b1","title":"Create pkg/templates package with TemplateStatus type","description":"WHY: Need a dedicated package for template comparison and update logic.\n\nWHAT: Create new pkg/templates/ package with TemplateStatus struct and comparison utilities.\n\nDESIGN: Files: pkg/templates/status.go\nDefine TemplateStatus struct with fields: ProjectTemplateVersion, CLIVersion, UpdateAvailable, CustomizedFiles, TotalFiles, NeedsUpdate\nAdd func CheckTemplateStatus(projectDir string, cliVersion string) (*TemplateStatus, error)\n\nACCEPTANCE:\n- pkg/templates/ package exists\n- TemplateStatus struct defined with all fields\n- CheckTemplateStatus function works correctly\n\nDEFINITION OF DONE:\n[ ] pkg/templates/ directory created\n[ ] status.go with TemplateStatus struct\n[ ] CheckTemplateStatus function\n[ ] Package compiles","status":"closed","priority":1,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:33:31.728857+07:00","updated_at":"2026-02-20T15:15:06.734029+07:00","closed_at":"2026-02-20T15:15:06.734029+07:00","blocks":["SL-20ecb8","SL-02616f"],"labels":["spec:596-doctor-version-update","story:US2","fr:FR-006","component:templates"]}
{"id":"SL-20ecb8","title":"Implement template diff and customized file detection","description":"WHY: Need to detect which files have been customized so they can be preserved during updates.\n\nWHAT: Implement SHA-256 checksum comparison between project files and embedded originals.\n\nDESIGN: File: pkg/templates/diff.go\n- func IsFileCustomized(projectPath, relPath string, embeddedFS embed.FS) (bool, error)\n- func FindCustomizedFiles(projectDir string) ([]string, error)\n- Compare SHA-256 hashes of project files vs embedded files\n- Files not in embedded FS are always customized\n\nACCEPTANCE:\n- Customized files correctly identified\n- SHA-256 comparison works\n- Files not in embedded FS marked as customized\n\nDEFINITION OF DONE:\n[ ] diff.go created in pkg/templates/\n[ ] IsFileCustomized function implemented\n[ ] FindCustomizedFiles function implemented\n[ ] SHA-256 comparison working","status":"closed","priority":1,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:33:33.057306+07:00","updated_at":"2026-02-20T15:15:07.725357+07:00","closed_at":"2026-02-20T15:15:07.725356+07:00","blocked_by":["SL-fd58b1"],"blocks":["SL-02616f"],"labels":["spec:596-doctor-version-update","story:US2","fr:FR-009","component:templates"]}
{"id":"SL-02616f","title":"Implement template updater with skip logic","description":"WHY: Need to update templates while preserving customized files.\n\nWHAT: Create template updater that copies embedded files, skipping customized ones.\n\nDESIGN: File: pkg/templates/updater.go\n- func UpdateTemplates(projectDir string) (*TemplateUpdateResult, error)\n- Walk embedded skills FS and copy to .claude/\n- Skip files that are customized\n- Set correct file permissions (0755 for scripts, 0644 for others)\n- Update template_version in specledger.yaml\n\nACCEPTANCE:\n- Templates updated from embedded FS\n- Customized files preserved (not overwritten)\n- File permissions set correctly\n- template_version updated in YAML\n\nDEFINITION OF DONE:\n[ ] updater.go created\n[ ] UpdateTemplates function implemented\n[ ] Skip logic for customized files\n[ ] Permission handling\n[ ] YAML update for template_version","status":"closed","priority":1,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:33:34.086048+07:00","updated_at":"2026-02-20T15:35:35.303394+07:00","closed_at":"2026-02-20T15:16:31.553865+07:00","blocked_by":["SL-fd58b1","SL-20ecb8"],"blocks":["SL-8c624a"],"labels":["spec:596-doctor-version-update","story:US2","fr:FR-008","fr:FR-009","fr:FR-012","component:templates"]}
{"id":"SL-8c624a","title":"Add interactive template update prompt to doctor","description":"WHY: Users need to be offered template updates when version mismatch is detected.\n\nWHAT: Add Bubble Tea TUI prompt for template updates when running sl doctor.\n\nDESIGN: File: pkg/cli/commands/doctor.go\n- Check template status before showing prompt\n- Display prompt if update available\n- Show warning for uncommitted changes\n- Show count of customized files\n- Call templates.UpdateTemplates if user accepts\n\nACCEPTANCE:\n- Prompt appears when templates outdated\n- Uncommitted changes warning shown\n- Customized files count shown\n- Templates updated on accept\n- template_version updated in YAML\n\nDEFINITION OF DONE:\n[ ] Template status check added\n[ ] Interactive prompt implemented\n[ ] Uncommitted changes warning\n[ ] Update execution on accept\n[ ] Skip in non-project directories","status":"closed","priority":1,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:33:35.106728+07:00","updated_at":"2026-02-20T15:21:41.557923+07:00","closed_at":"2026-02-20T15:21:41.557923+07:00","blocked_by":["SL-e206f1","SL-02616f"],"blocks":["SL-5e7876"],"labels":["spec:596-doctor-version-update","story:US2","fr:FR-007","fr:FR-011","component:cli"]}
{"id":"SL-5e7876","title":"Extend DoctorOutput struct with version fields","description":"WHY: JSON output needs to include version and template status for CI/CD pipelines.\n\nWHAT: Add CLI version and template status fields to DoctorOutput struct.\n\nDESIGN: File: pkg/cli/commands/doctor.go\nAdd fields to DoctorOutput:\n- CLIVersion string\n- CLILatestVersion string\n- CLIUpdateAvailable bool\n- CLIUpdateInstructions string\n- TemplateVersion string\n- TemplateUpdateAvailable bool\n- TemplateCustomizedFiles []string\n\nACCEPTANCE:\n- New fields exist in DoctorOutput\n- Fields populated in outputDoctorJSON\n- JSON output includes all new fields\n\nDEFINITION OF DONE:\n[ ] DoctorOutput struct extended\n[ ] Fields populated in JSON output\n[ ] JSON output validated","status":"closed","priority":2,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:34:15.877717+07:00","updated_at":"2026-02-20T15:23:22.028651+07:00","closed_at":"2026-02-20T15:23:22.028651+07:00","blocked_by":["SL-445a25","SL-8c624a"],"blocks":["SL-dda5e1"],"labels":["spec:596-doctor-version-update","story:US3","fr:FR-010","component:cli"]}
{"id":"SL-dda5e1","title":"Update JSON output to include version/template info","description":"WHY: CI/CD pipelines need machine-readable version and template status.\n\nWHAT: Update outputDoctorJSON to populate and include version/template fields.\n\nDESIGN: File: pkg/cli/commands/doctor.go\n- Populate version fields from version package\n- Populate template fields from templates package\n- Skip template updates in JSON mode (no interactive prompt)\n- Include template_update_available flag\n\nACCEPTANCE:\n- sl doctor --json includes cli_version\n- sl doctor --json includes cli_update_available\n- sl doctor --json includes template_version\n- sl doctor --json includes template_update_available\n\nDEFINITION OF DONE:\n[ ] Version fields in JSON output\n[ ] Template fields in JSON output\n[ ] Template updates skipped in JSON mode\n[ ] JSON output tested","status":"closed","priority":2,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:34:17.094588+07:00","updated_at":"2026-02-20T15:23:23.028854+07:00","closed_at":"2026-02-20T15:23:23.028854+07:00","blocked_by":["SL-5e7876"],"blocks":["SL-74478b","SL-041a6b"],"labels":["spec:596-doctor-version-update","story:US3","fr:FR-010","component:cli"]}
{"id":"SL-74478b","title":"Update CLAUDE.md with feature details","description":"WHY: Developers and AI agents need to know about the new version checking and template update capabilities.\n\nWHAT: Update CLAUDE.md with Active Technologies and Recent Changes for this feature.\n\nDESIGN: File: CLAUDE.md\n- Add Go 1.24.2 + Cobra + net/http to Active Technologies\n- Add 596-doctor-version-update to Recent Changes\n- Document pkg/version/ and pkg/templates/ packages\n\nACCEPTANCE:\n- CLAUDE.md updated with new technologies\n- Feature listed in Recent Changes\n- New packages documented\n\nDEFINITION OF DONE:\n[ ] CLAUDE.md updated\n[ ] Active Technologies section updated\n[ ] Recent Changes section updated","status":"closed","priority":3,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:34:18.013131+07:00","updated_at":"2026-02-20T15:24:53.786653+07:00","closed_at":"2026-02-20T15:24:53.786652+07:00","blocked_by":["SL-dda5e1"],"labels":["spec:596-doctor-version-update","phase:polish","component:docs"]}
{"id":"SL-041a6b","title":"Run quickstart.md validation tests","description":"WHY: Ensure the implemented feature works as documented in quickstart scenarios.\n\nWHAT: Execute validation commands from quickstart.md to verify all scenarios work correctly.\n\nDESIGN: Test scenarios from quickstart.md:\n- sl doctor shows version section\n- sl doctor --json output is parseable\n- Template update flow works end-to-end\n- Customized file detection works\n\nACCEPTANCE:\n- All quickstart validation commands pass\n- Version check works\n- Template update works\n- JSON output parseable\n\nDEFINITION OF DONE:\n[ ] sl doctor version check verified\n[ ] sl doctor --json verified\n[ ] Template update flow verified\n[ ] Customized file detection verified","status":"closed","priority":3,"issue_type":"task","spec_context":"596-doctor-version-update","created_at":"2026-02-20T14:34:19.655317+07:00","updated_at":"2026-02-20T15:24:26.507464+07:00","closed_at":"2026-02-20T15:24:26.507464+07:00","blocked_by":["SL-dda5e1"],"labels":["spec:596-doctor-version-update","phase:polish","component:testing"]}
