{"id":"SL-bb6f5b","title":"Issue Create Fields Enhancement","description":"Enhance sl issue create and sl issue update commands to support structured fields (--acceptance-criteria, --dod, --design, --notes) that already exist in the JSONL model. Update the specledger.tasks and specledger.implement prompts to utilize these fields for better task generation and implementation tracking. Improve task blocking relationship logic for proper dependency trees.\n\nKey deliverables:\n- CLI flags for create: --acceptance-criteria, --dod, --design, --notes\n- CLI flags for update: --dod, --check-dod, --uncheck-dod\n- Updated issue show display with dedicated sections\n- Updated tasks.md and implement.md prompt templates\n- Improved blocking relationship instructions","status":"open","priority":1,"issue_type":"epic","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:40:43.399622+07:00","updated_at":"2026-02-22T22:40:43.399622+07:00","labels":["spec:597-issue-create-fields","component:cli"]}
{"id":"SL-05d112","title":"US1: Create Issues with Complete Field Set","description":"Add --acceptance-criteria, --dod, --design, --notes flags to sl issue create command.\n\nWHY: Users currently cannot set acceptance criteria, definition of done, design notes, or notes during issue creation, forcing a two-step workflow (create then update).\n\nDESIGN: Modify pkg/cli/commands/issue.go:\n- Add flags: issueAcceptCriteriaFlag (string), issueDoDFlag ([]string StringArray), issueDesignFlag (string), issueNotesFlag (string)\n- Update init() to register flags on issueCreateCmd\n- Update runIssueCreate() to populate Issue fields from flags\n\nACCEPTANCE: Users can create issues with all 4 fields in a single command using the new flags.\n\nDEFINITION OF DONE:\n[ ] --acceptance-criteria flag added and working\n[ ] --dod flag added with StringArray for repeated values\n[ ] --design flag added and working\n[ ] --notes flag added and working\n[ ] runIssueCreate populates all new fields\n[ ] Manual test with all 4 flags passes","status":"open","priority":1,"issue_type":"feature","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:41:13.428214+07:00","updated_at":"2026-02-22T23:01:30.112858+07:00","blocks":["SL-0dd751"],"labels":["spec:597-issue-create-fields","phase:us1","story:US1","component:cli"]}
{"id":"SL-225aa7","title":"Add create flags to issueCreateCmd","description":"WHY: issueCreateCmd needs new flags for --acceptance-criteria, --dod, --design, --notes to allow users to set these fields during creation.\n\nDESIGN: In pkg/cli/commands/issue.go, add new flag variables and register them in init():\n- issueAcceptCriteriaFlag string\n- issueDoDFlag []string (use Flags().StringArrayVar for repeated flags)\n- issueDesignFlag string  \n- issueNotesFlag string\n\nACCEPTANCE: All 4 flags are registered and accessible in runIssueCreate().\n\nDEFINITION OF DONE:\n[ ] issueAcceptCriteriaFlag variable declared and flag registered\n[ ] issueDoDFlag variable declared with StringArrayVar\n[ ] issueDesignFlag variable declared and flag registered\n[ ] issueNotesFlag variable declared and flag registered\n[ ] go build succeeds","status":"open","priority":1,"issue_type":"task","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:42:33.837331+07:00","updated_at":"2026-02-22T22:43:01.408601+07:00","blocks":["SL-7b3e32"],"labels":["spec:597-issue-create-fields","story:US1","component:cli","fr:FR-001","fr:FR-002","fr:FR-003","fr:FR-004"]}
{"id":"SL-7b3e32","title":"Populate issue fields from create flags","description":"WHY: After flags are registered, runIssueCreate() must use them to populate the Issue struct before saving.\n\nDESIGN: In pkg/cli/commands/issue.go runIssueCreate(), after NewIssue():\n- Set issue.AcceptanceCriteria = issueAcceptCriteriaFlag (if not empty)\n- Set issue.Design = issueDesignFlag (if not empty)\n- Set issue.Notes = issueNotesFlag (if not empty)\n- Convert issueDoDFlag []string to DefinitionOfDone with unchecked items\n\nACCEPTANCE: Creating an issue with all 4 flags results in persisted JSONL with all fields populated.\n\nDEFINITION OF DONE:\n[ ] AcceptanceCriteria populated from flag\n[ ] Design populated from flag\n[ ] Notes populated from flag\n[ ] DefinitionOfDone created from --dod flags with all items unchecked\n[ ] Manual test: sl issue create with all flags, verify sl issue show displays all fields","status":"open","priority":1,"issue_type":"task","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:42:50.554297+07:00","updated_at":"2026-02-22T22:43:01.408601+07:00","blocked_by":["SL-225aa7"],"labels":["spec:597-issue-create-fields","story:US1","component:cli","fr:FR-001","fr:FR-002","fr:FR-003","fr:FR-004"]}
{"id":"SL-0dd751","title":"US2: Update Definition of Done on Existing Issues","description":"Add --dod, --check-dod, --uncheck-dod flags to sl issue update command for managing DoD items.\n\nWHY: Users need to update DoD items on existing issues and mark items as checked/unchecked as work progresses.\n\nDESIGN: Modify pkg/cli/commands/issue.go:\n- Add flags: issueDoDFlag ([]string for replacement), issueCheckDoDFlag (string), issueUncheckDoDFlag (string)\n- Update runIssueUpdate() to handle DoD replacement and check/uncheck operations\n- Use exact text matching for check/uncheck operations\n- Return error if item not found\n\nACCEPTANCE: Users can replace DoD, check items, and uncheck items via CLI with exact text matching.\n\nDEFINITION OF DONE:\n[ ] --dod flag replaces entire DoD\n[ ] --check-dod marks item as checked with timestamp\n[ ] --uncheck-dod marks item as unchecked\n[ ] Error returned when item not found\n[ ] Exact text matching (case-sensitive)","status":"open","priority":2,"issue_type":"feature","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:43:36.8901+07:00","updated_at":"2026-02-22T23:01:30.135714+07:00","blocked_by":["SL-05d112"],"blocks":["SL-d42fee","SL-a594b9"],"labels":["spec:597-issue-create-fields","phase:us2","story:US2","component:cli"]}
{"id":"SL-3c9872","title":"Add DoD update flags to issueUpdateCmd","description":"WHY: issueUpdateCmd needs new flags for managing Definition of Done items.\n\nDESIGN: In pkg/cli/commands/issue.go, add new flag variables and register them in init():\n- issueDoDFlag []string (StringArrayVar for replacement)\n- issueCheckDoDFlag string\n- issueUncheckDoDFlag string\n\nNote: Can reuse issueDoDFlag variable name since create/update are separate commands.\n\nACCEPTANCE: All 3 flags are registered and accessible in runIssueUpdate().\n\nDEFINITION OF DONE:\n[ ] issueDoDFlag declared with StringArrayVar for update command\n[ ] issueCheckDoDFlag declared and registered\n[ ] issueUncheckDoDFlag declared and registered\n[ ] go build succeeds","status":"open","priority":2,"issue_type":"task","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:46:27.508382+07:00","updated_at":"2026-02-22T22:52:29.815701+07:00","blocks":["SL-5ba439"],"labels":["spec:597-issue-create-fields","story:US2","component:cli","fr:FR-005","fr:FR-006","fr:FR-007"]}
{"id":"SL-5ba439","title":"Handle DoD operations in runIssueUpdate","description":"WHY: runIssueUpdate() must process --dod, --check-dod, and --uncheck-dod flags to modify issue's Definition of Done.\n\nDESIGN: In pkg/cli/commands/issue.go runIssueUpdate():\n- If issueDoDFlag has values: Convert to DefinitionOfDone with unchecked items, set update.DefinitionOfDone\n- If issueCheckDoDFlag is set: Set update.CheckDoDItem (existing CheckDoDItem field in IssueUpdate)\n- If issueUncheckDoDFlag is set: Set update.UncheckDoDItem\n- Store.Update() already handles these via existing methods CheckItem()/UncheckItem()\n\nACCEPTANCE: DoD operations work correctly with exact text matching and error on not found.\n\nDEFINITION OF DONE:\n[ ] --dod replaces entire DoD with new unchecked items\n[ ] --check-dod sets CheckDoDItem in update, results in checked item with timestamp\n[ ] --uncheck-dod sets UncheckDoDItem in update, results in unchecked item\n[ ] Error message format: DoD item not found: '\u003ctext\u003e'\n[ ] Manual tests for all 3 operations pass","status":"open","priority":2,"issue_type":"task","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:50:14.839158+07:00","updated_at":"2026-02-22T22:52:29.815701+07:00","blocked_by":["SL-3c9872"],"labels":["spec:597-issue-create-fields","story:US2","component:cli","fr:FR-005","fr:FR-006","fr:FR-007","fr:FR-008","fr:FR-009"]}
{"id":"SL-cf082a","title":"Update issue show display for new fields","description":"Add dedicated sections for acceptance_criteria, design, and notes in sl issue show output.\n\nWHY: Currently sl issue show displays definition_of_done but not acceptance_criteria, design, or notes fields.\n\nDESIGN: In pkg/cli/commands/issue.go runIssueShow(), add output sections after Description:\n- Acceptance Criteria section (if field populated)\n- Design section (if field populated)\n- Notes section (if field populated)\n\nFormat same as existing Description and Definition of Done sections.\n\nACCEPTANCE: sl issue show displays all 4 fields in dedicated sections when populated.\n\nDEFINITION OF DONE:\n[ ] Acceptance Criteria section displays when field populated\n[ ] Design section displays when field populated\n[ ] Notes section displays when field populated\n[ ] Empty fields are omitted from display\n[ ] Manual test with populated issue shows all sections","status":"open","priority":1,"issue_type":"task","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:53:07.192802+07:00","updated_at":"2026-02-22T23:01:30.171556+07:00","blocks":["SL-f17a81"],"labels":["spec:597-issue-create-fields","story:US1","component:cli","fr:FR-010"]}
{"id":"SL-d42fee","title":"US3+US4: Tasks Prompt Updates","description":"Update specledger.tasks prompt to use new CLI flags and improve blocking relationship instructions.\n\nWHY: Task generation should use the new CLI flags instead of embedding everything in description. Blocking relationships need clearer guidance.\n\nDESIGN: Update .claude/commands/specledger.tasks.md and pkg/embedded files:\n1. Update CLI example section to use --acceptance-criteria, --dod, --design flags\n2. Add instruction to populate design field from plan.md for feature issues\n3. Improve blocking relationship instructions (US3):\n   - Setup blocks implementation\n   - Models block services, services block endpoints\n   - Parallelizable tasks (different files) are NOT blocked by each other\n   - Foundational phases block user story phases\n\nACCEPTANCE: Generated tasks use new CLI flags and have correct blocking relationships.\n\nDEFINITION OF DONE:\n[ ] CLI examples use --acceptance-criteria, --dod, --design flags\n[ ] Instruction to populate design from plan.md added\n[ ] Blocking relationship rules clearly documented\n[ ] Both .claude/commands and pkg/embedded versions updated","status":"open","priority":2,"issue_type":"feature","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:53:33.187116+07:00","updated_at":"2026-02-22T23:01:30.148039+07:00","blocked_by":["SL-0dd751"],"blocks":["SL-f17a81"],"labels":["spec:597-issue-create-fields","phase:us3-us4","story:US3","story:US4","component:prompts"]}
{"id":"SL-fe19e2","title":"Update CLI examples in tasks prompt","description":"WHY: Tasks prompt CLI examples still show embedding everything in --description instead of using dedicated flags.\n\nDESIGN: In .claude/commands/specledger.tasks.md, update Example CLI Calls section:\n- Update Task example to use --acceptance-criteria, --dod, --design flags\n- Update description to only contain WHY section\n- Remove note about no separate flags\n\nFiles to update:\n- .claude/commands/specledger.tasks.md\n- pkg/embedded/skills/commands/specledger.tasks.md\n- pkg/embedded/templates/specledger/.claude/commands/specledger.tasks.md\n\nACCEPTANCE: CLI examples show proper flag usage with structured fields.\n\nDEFINITION OF DONE:\n[ ] Task example uses --acceptance-criteria flag\n[ ] Task example uses --dod flag (repeated)\n[ ] Task example uses --design flag\n[ ] Description field simplified to WHY only\n[ ] All 3 file locations updated","status":"open","priority":2,"issue_type":"task","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:55:34.815614+07:00","updated_at":"2026-02-22T22:55:34.815614+07:00","labels":["spec:597-issue-create-fields","story:US4","component:prompts","fr:FR-011"]}
{"id":"SL-de1a02","title":"Add design field population instruction","description":"WHY: Feature issues should have design field populated with technical approach from plan.md for better implementation guidance.\n\nDESIGN: In .claude/commands/specledger.tasks.md, add instruction in task generation workflow:\n- When creating feature-type issues for phases\n- Extract technical approach from plan.md\n- Set --design flag with extracted approach\n\nAdd to Issue Content Structure section or Task Generation Rules section.\n\nACCEPTANCE: Task generation prompt instructs to populate design field from plan.md for feature issues.\n\nDEFINITION OF DONE:\n[ ] Instruction added to populate design field\n[ ] Instruction references plan.md as source\n[ ] All 3 file locations updated","status":"open","priority":2,"issue_type":"task","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:55:48.524096+07:00","updated_at":"2026-02-22T22:55:48.524096+07:00","labels":["spec:597-issue-create-fields","story:US4","component:prompts","fr:FR-012"]}
{"id":"SL-c141f0","title":"Improve blocking relationship instructions","description":"WHY: Generated tasks need correct blocking relationships to reflect implementation order and enable parallel work identification.\n\nDESIGN: In .claude/commands/specledger.tasks.md, add/enhance Task Generation Rules section with explicit blocking rules:\n\n1. Setup blocks implementation\n2. Within user stories:\n   - Models block services\n   - Services block endpoints\n3. Parallelizable tasks (different files, no data dependency) are NOT blocked by each other\n4. Feature-type issues:\n   - Foundational phases block user story phases\n   - Phases at same level do NOT block each other\n\nAdd examples of correct vs incorrect blocking patterns.\n\nACCEPTANCE: Prompt contains clear, actionable blocking relationship rules with examples.\n\nDEFINITION OF DONE:\n[ ] Blocking rules documented in Task Generation Rules section\n[ ] Model-\u003eService-\u003eEndpoint chain documented\n[ ] Parallelizable task rules documented\n[ ] Feature phase blocking rules documented\n[ ] Examples of correct/incorrect patterns added\n[ ] All 3 file locations updated","status":"open","priority":2,"issue_type":"task","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:56:04.681771+07:00","updated_at":"2026-02-22T22:56:04.681771+07:00","labels":["spec:597-issue-create-fields","story:US3","component:prompts","fr:FR-016","fr:FR-017","fr:FR-018"]}
{"id":"SL-a594b9","title":"US5: Implement Prompt Updates","description":"Update specledger.implement prompt to utilize design, acceptance_criteria, and definition_of_done fields.\n\nWHY: Implementation workflow should read design for approach, verify against acceptance criteria, and check off DoD items as work progresses.\n\nDESIGN: Update .claude/commands/specledger.implement.md and pkg/embedded files:\n1. Add instruction to read design field at task start\n2. Add instruction to read acceptance_criteria at task start\n3. Add instruction to verify against acceptance_criteria before marking complete\n4. Add instruction to use --check-dod when subtasks complete\n\nACCEPTANCE: Implement prompt instructs agent to utilize all 3 structured fields during implementation.\n\nDEFINITION OF DONE:\n[ ] Instruction to read design field at task start\n[ ] Instruction to read acceptance_criteria at task start\n[ ] Instruction to verify against acceptance_criteria before completion\n[ ] Instruction to use --check-dod on subtask completion\n[ ] Both .claude/commands and pkg/embedded versions updated","status":"open","priority":3,"issue_type":"feature","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:56:29.216978+07:00","updated_at":"2026-02-22T23:01:30.159963+07:00","blocked_by":["SL-0dd751"],"blocks":["SL-f17a81"],"labels":["spec:597-issue-create-fields","phase:us5","story:US5","component:prompts"]}
{"id":"SL-dfa042","title":"Add field reading instructions to implement prompt","description":"WHY: Agent needs to read design and acceptance_criteria fields at task start to understand technical approach and requirements.\n\nDESIGN: In .claude/commands/specledger.implement.md, add to workflow section:\n- Before starting implementation: Read issue's design field for technical approach\n- Before starting implementation: Read issue's acceptance_criteria for requirements\n- Use sl issue show to retrieve fields\n\nFiles to update:\n- .claude/commands/specledger.implement.md\n- pkg/embedded/skills/commands/specledger.implement.md (if exists)\n- pkg/embedded/templates/specledger/.claude/commands/specledger.implement.md\n\nACCEPTANCE: Implement prompt instructs to read design and acceptance_criteria at task start.\n\nDEFINITION OF DONE:\n[ ] Instruction to read design field added\n[ ] Instruction to read acceptance_criteria added\n[ ] Both file locations updated","status":"open","priority":3,"issue_type":"task","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:58:04.223592+07:00","updated_at":"2026-02-22T22:58:33.020702+07:00","blocks":["SL-909448"],"labels":["spec:597-issue-create-fields","story:US5","component:prompts","fr:FR-013","fr:FR-014"]}
{"id":"SL-909448","title":"Add AC verification and DoD check instructions","description":"WHY: Agent needs to verify against acceptance_criteria before completion and check off DoD items as subtasks complete.\n\nDESIGN: In .claude/commands/specledger.implement.md, add to workflow section:\n- Before marking task complete: Verify implementation satisfies acceptance_criteria\n- When subtask completes: Use sl issue update SL-xxxxx --check-dod \"Item text\" to mark relevant DoD items\n- Only close issue after all DoD items checked\n\nACCEPTANCE: Implement prompt instructs to verify AC before completion and use --check-dod for DoD items.\n\nDEFINITION OF DONE:\n[ ] Instruction to verify against AC before completion added\n[ ] Instruction to use --check-dod on subtask completion added\n[ ] Example CLI command for --check-dod included\n[ ] Both file locations updated","status":"open","priority":3,"issue_type":"task","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:58:23.121458+07:00","updated_at":"2026-02-22T22:58:33.020702+07:00","blocked_by":["SL-dfa042"],"labels":["spec:597-issue-create-fields","story:US5","component:prompts","fr:FR-014","fr:FR-015"]}
{"id":"SL-f17a81","title":"Polish: Tests and Documentation","description":"Add unit tests for new CLI flags and update any affected documentation.\n\nWHY: New CLI functionality needs test coverage to ensure correctness and prevent regressions.\n\nDESIGN: Add tests in tests/issues/issue_test.go:\n- Test issue create with all 4 new flags\n- Test issue create with repeated --dod flags\n- Test issue update with --dod replacement\n- Test issue update with --check-dod success and error cases\n- Test issue update with --uncheck-dod success and error cases\n- Test exact text matching for DoD operations\n\nACCEPTANCE: All new CLI flag functionality has test coverage.\n\nDEFINITION OF DONE:\n[ ] Tests for create with all 4 flags\n[ ] Tests for repeated --dod flags\n[ ] Tests for --dod replacement on update\n[ ] Tests for --check-dod success and error\n[ ] Tests for --uncheck-dod success and error\n[ ] Tests for exact text matching\n[ ] make test passes","status":"open","priority":3,"issue_type":"feature","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:58:47.791522+07:00","updated_at":"2026-02-22T23:01:30.171556+07:00","blocked_by":["SL-d42fee","SL-a594b9","SL-cf082a"],"labels":["spec:597-issue-create-fields","phase:polish","component:tests"]}
{"id":"SL-9f721e","title":"Add unit tests for CLI flag changes","description":"WHY: New CLI flags need test coverage to ensure correctness and prevent regressions.\n\nDESIGN: Add tests in tests/issues/issue_test.go or create new test file:\n1. TestIssueCreateWithAllFlags - verify all 4 flags persist correctly\n2. TestIssueCreateWithRepeatedDoD - verify StringArray works for --dod\n3. TestIssueUpdateDoDReplacement - verify --dod replaces entire DoD\n4. TestIssueUpdateCheckDoD - verify --check-dod marks item checked with timestamp\n5. TestIssueUpdateCheckDoDNotFound - verify error when item not found\n6. TestIssueUpdateUncheckDoD - verify --uncheck-dod marks item unchecked\n7. TestDoDExactTextMatching - verify case-sensitive, no whitespace normalization\n\nACCEPTANCE: All new CLI flag functionality has test coverage, make test passes.\n\nDEFINITION OF DONE:\n[ ] Test for create with all 4 flags passes\n[ ] Test for repeated --dod flags passes\n[ ] Test for --dod replacement passes\n[ ] Test for --check-dod success passes\n[ ] Test for --check-dod error case passes\n[ ] Test for --uncheck-dod passes\n[ ] Test for exact text matching passes\n[ ] make test passes","status":"open","priority":3,"issue_type":"task","spec_context":"597-issue-create-fields","created_at":"2026-02-22T22:59:33.111896+07:00","updated_at":"2026-02-22T22:59:33.111896+07:00","labels":["spec:597-issue-create-fields","phase:polish","component:tests"]}
